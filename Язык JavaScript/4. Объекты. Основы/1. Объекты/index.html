<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Объекты</title>
    <link href="../../../style.css" type="text/css" rel="stylesheet">
</head>
<body>
    <article>
        <h2>Объекты</h2>
        <p>Объекты используются для хранения коллекций различных значений и более сложных сущностей. В JavaScript объекты
        используются очень часто, это одна из основ языка.</p>
        <p>Объект может быть создан с помощью фигурных скобок <code>{ ... }</code> с необязательным списком <i>свойств</i>.
        Свойство - это пара «ключ: значение», где <code>ключ</code> - это строка (также называемая «именем свойства»),
        а <code>значение</code> может быть чем угодно.</p>
        <p>Пустой объект можно создать, используя один из двух вариантов синтаксиса:</p>
        <code>let user = new Object();</code> // Синтаксис «конструктор объекта»<br>
        <code>let user = {};</code> // Синтаксис «литерал объекта»
        <p>Обычно используют вариант с фигурными скобками <code>{ ... }</code>. Такое объявление называют <i>литералом
        объекта</i> или <i>литеральной нотацией</i>.</p>
    </article>

    <article>
        <h2>Литералы и свойства</h2>
        <p>При использовании литерального синтаксиса <code>{ ... }</code> мы сразу можем поместить в объект несколько
        свойств в виде пар «ключ: значение»:</p>
        <code>
            let user = {<br>
            &nbsp;&nbsp;name: 'John',<br>
            &nbsp;&nbsp;age: 30<br>
            };
        </code>
        <p>У каждого свойства есть ключ (также называемый «имя» или «идентификатор»). После имени свойства следует
        двоеточие <code>:</code> и затем указывается значение свойства. Если в объекте несколько свойств, то они
        перечисляются через запятую.</p>
        <p>Для обращения к свойствам используется запись «через точку»:</p>
        <code>alert(user.name);</code> // 'john'<br>
        <code>alert(user.age);</code> // 30
        <p>Мы можем добавить свойство:</p>
        <code>user.is_admin = true;</code>
        <p>Для удаления свойства мы можем использовать оператор <code>delete</code>:</p>
        <code>delete user.age;</code>
        <p>Имя свойства может состоять из нескольких слов, но тогда оно должно быть заключено в кавычки.</p>

        <article class="note">
            <h2>Объект, объявленный как константа, может быть изменен</h2>
            <p>Объект, объявленный через <code>const</code>, <i>может</i> быть изменен.</p>
            <p>Дело в том, что объявление <code>const</code> защищает от изменения только переменную объекта, а не ее
            содержимое.</p>
        </article>
    </article>

    <article>
        <h2>Квадратные скобки</h2>
        <p>Для свойств, имена которых состоят из нескольких слов, доступ к значению «через точку» не работает.</p>
        <p>Точка требует, чтобы ключ был именован по правилам именования переменных. То есть не имел пробелов,
        не начинался с цифры и не содержал специальные символы, кроме <code>$</code> и <code>_</code>.</p>
        <p>Для таких случаев существует альтернативный способ доступа к свойствам через квадратные скобки. Такой способ
        сработает с любым именем свойства.</p>
        <p>Квадратные скобки также позволяют обратиться к свойству, имя которого может быть результатом выражения. Например,
        имя свойства может храниться в переменной.</p>
    </article>

    <article>
        <h2>Вычисляемые свойства</h2>
        <p>Мы можем использовать квадратные скобки в литеральной нотации для создания <i>вычисляемого свойства</i>.</p>
        <p>Пример:</p>
        <code>
            let fruit = prompt('Какой фрукт купить?', 'apple');<br>
            <br>
            let bag = {<br>
            &nbsp;&nbsp;[fruit]: 5,<br>
            };<br>
            <br>
            alert(bag.apple);
        </code>
        <p>Смысл вычисляемого свойства прост: запись <code>[fruit]</code> означает, что имя свойства необходимо взять из
        переменной <code>fruit</code>.</p>
        <p>И если посетитель введет слово <code>'apple'</code>, то в объекте <code>bag</code> теперь будет лежать свойство
        <code>{apple: 5}</code>.</p>
        <p>Квадратные скобки дают намного больше возможностей, чем запись через точку. Они позволяют использовать любые
        имена свойств и переменные, хотя и требуют более громоздких конструкций кода.</p>
    </article>

    <article>
        <h2>Свойство из переменной</h2>
        <p>В реальном коде часто нам необходимо использовать существующие переменные как значения для свойств с тем же
        именем.</p>
        <p>Например:</p>
        <code>
            function make_user(name, age) {<br>
            &nbsp;&nbsp;return {<br>
            &nbsp;&nbsp;&nbsp;name: name,<br>
            &nbsp;&nbsp;&nbsp;age: age<br>
            &nbsp;&nbsp;};<br>
            }<br>
            <br>
            let user = make_user('John', 30);<br>
            alert(user.name);
        </code>
        <p>В примере выше название свойств <code>name</code> и <code>age</code> совпадают с названиями переменных, которые
        мы подставляем в качестве значений этих свойств. Такой подход настолько распространен, что существуют специальные
        <i>короткие свойства</i> для упрощения такой записи.</p>
        <p>Вместо <code>name: name</code> мы можем написать просто <code>name</code>:</p>
        <code>
            function make_user(name, age) {<br>
            &nbsp;&nbsp;return {<br>
            &nbsp;&nbsp;&nbsp;name,<br>
            &nbsp;&nbsp;&nbsp;age<br>
            &nbsp;&nbsp;};<br>
            }
        </code>
        <p>Мы можем использовать как обычные свойства, так и короткие в одном и том же объекте.</p>
    </article>

    <article>
        <h2>Ограничения на имена свойств</h2>
        <p>Как мы уже знаем, имя переменной не может совпадать с зарезервированными словами, такими как «for»,
        «let», «return» и т.д.</p>
        <p>Но для свойств объекта такого ограничения нет.</p>
        <p>Иными словами, нет никаких ограничений к именам свойств. Они могут быть в виде строк или символов (специальный
        тип данных для идентификаторов).</p>
        <p>Все другие типы данных будут автоматически преобразованы к строке.</p>
        <p>Например, если использовать число <code>0</code> в качестве ключа, то оно превратится в строку <code>'0'</code>.</p>
        <p>Есть небольшой подводный камень, связанный со специальным свойством <code>__proto__</code>. Мы не можем установить
        его в необъектное значение.</p>
    </article>

    <article>
        <h2>Проверка существования свойства, оператор «in»</h2>
        <p>В отличие от многих других языков, особенность JavaScript-объектов в том, что можно получить доступ к любому
        свойству. Даже если свойства не существует - ошибки не будет!</p>
        <p>При обращении к свойству, которого нет, возвращается <code>undefined</code>. Это позволяет просто проверить
        существование свойства:</p>
        <code>let user = {};</code><br>
        <code>alert(user.noSuchProperty === undefined);</code> // true означает "свойства нет"
        <p>Также существует специальный оператор <code>in</code> для проверки существования свойства в объекте.</p>
        <p>Синтаксис оператора:</p>
        <code>'key' in object</code>
        <p>Слева от оператора <code>in</code> должно быть <i>имя свойства</i>. Обычно это строка в кавычках.</p>
        <p>Если мы опускаем кавычки, это значит, что мы указываем переменную, в которой находится имя свойства.</p>
        <p>Для чего вообще нужен оператор <code>in</code>? Разве недостаточно сравнения с <code>undefined</code>?</p>
        <p>В большинстве случаев прекрасно работает сравнение с <code>undefined</code>. Но есть особый случай, когда оно не
        подходит и нужно использовать <code>in</code>.</p>
        <p>Это когда свойство существует, но содержит значение <code>undefined</code>.</p>
    </article>

    <article>
        <h2>Цикл «for...in»</h2>
        <p>Для перебора всех свойств объекта используется цикл <code>for...in</code>. Этот цикл отличается от изученного
        ранее цикла <code>for(;;)</code>.</p>
        <p>Синтаксис:</p>
        <code>
            for (let key in object) {<br>
            &nbsp;&nbsp;// тело цикла выполняется для каждого свойства объекта<br>
            }
        </code>
        <p>Обратите внимание, что все конструкции «for» позволяют нам объявлять переменную внутри цикла.</p>
    </article>

    <article>
        <h2>Упорядочение свойств объекта</h2>
        <p>Упорядочены ли свойства объекта? Другими словами, если мы будем в цикле перебирать все свойства объекта,
        получим ли мы их в том же порядке, в котором мы их добавили? Можем ли мы на это рассчитывать?</p>
        <p>Короткий ответ: свойства упорядочены особым образом: свойства с целочисленными ключами сортируются по возрастанию,
        остальные располагаются в порядке создания.</p>

        <article class="note">
            <h2>Целочисленные свойства? Это что?</h2>
            <p>Термин «целочисленное свойство» означает строку, которая может быть преобразована в целое число и обратно
            без изменений.</p>
            <p>То есть, <code>'49'</code> - это целочисленное имя свойства, потому что если его преобразовать в целое число,
            а затем обратно в строку, то оно не изменится. А вот свойства <code>'+49'</code> или <code>'1.2'</code> таковыми
            не являются.</p>
        </article>
    </article>

    <article>
        <h2>Итого</h2>
        <p>Объекты - это ассоциативные массивы с рядом дополнительных возможностей.</p>
        <p>Они хранят свойства (пары ключ-значение), где:</p>
        <ul>
            <li>Ключи свойств должны быть строками или символами (обычно строками);</li>
            <li>Значения могут быть любого типа.</li>
        </ul>
        <p>Чтобы получить доступ к свойству, мы можем использовать:</p>
        <ul>
            <li>Запись через точку: <code>obj.property</code>;</li>
            <li>Квадратные скобки: <code>obj['property']</code>. Квадратные скобки позволяют взять ключ из переменной.</li>
        </ul>
        <p>Дополнительные операторы:</p>
        <ul>
            <li>Удаление свойства: <code>delete obj.prop;</code></li>
            <li>Проверка существования свойства: <code>'key' in obj</code>;</li>
            <li>Перебор свойств объекта: цикл for <code>for (let key in obj)</code>.</li>
        </ul>
        <p>То, что мы изучали в этой главе, называется «простым объектом» («plain object») или просто <code>Object</code>.</p>
        <p>В JavaScript есть много других типов объектов:</p>
        <ul>
            <li><code>Array</code> для хранения упорядоченных коллекций данных;</li>
            <li><code>Date</code> для хранения информации о дате и времени;</li>
            <li><code>Error</code> для хранения информации об ошибке;</li>
            <li>И так далее...</li>
        </ul>
    </article>
</body>
</html>