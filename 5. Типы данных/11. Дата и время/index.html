<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Дата и время</title>
    <link href="../../style.css" rel="stylesheet">
</head>
<body>
    <article>
        <h2>Дата и время</h2>
        <p>Объект <code>Date</code> содержит дату и время, а также предоставляет методы управления ими.</p>
        <p>Например, его можно использовать для хранения времени создания/изменения, для измерения времени или просто для
        вывода текущей даты.</p>
    </article>

    <article>
        <h2>Создание</h2>
        <p>Для создания нового объекта <code>Date</code> нужно вызвать конструктор <code>new Date()</code> с одним из
        следующих аргументов:</p>
        <ul>
            <li>
                <p><code>new Date()</code></p>
                <p>Без аргументов - создать объект <code>Date</code> с текущими датой и временем.</p>
            </li>
            <li>
                <p><code>new Date(milliseconds)</code></p>
                <p>Создать объект <code>Date</code> с временем, равным количеству миллисекунд, прошедших с 1 января 1970 года
                UTC+0.</p>
                <p>Целое число, представляющее собой количество миллисекунд, прошедших с начала 1970 года, называется
                <i>таймстамп</i> (англ. timestamp).</p>
                <p>Это легковесное численное представление даты. Из таймстампа всегда можно получить дату с помощью
                <code>new Date(timestamp)</code> и преобразовать существующий объект <code>Date</code> в таймстамп,
                используя метод <code>date.getTime()</code>.</p>
                <p>Датам до 1 января 1970 года будут соответствовать отрицательные таймстампы, например:</p>
                <code>let Dec31_1969 = new Date(-24 * 3600 * 1000);</code>
            </li>
            <li>
                <p><code>new Date(datestring)</code></p>
                <p>Если аргумент всего один, и это строка, то из нее прочитывается дата. Алгоритм разбора такой же, как в
                <code>Date.parse</code>.</p>
                <code>let date = new Date('2024-11-07');</code>
            </li>
            <li>
                <p><code>new Date(year, month, date, hours, minutes, seconds, ms)</code></p>
                <p>Создать объект <code>Date</code> с заданными компонентами в местном часовом поясе. Обязательны только
                первые два аргумента.</p>
                <ul>
                    <li><code>year</code> должен состоять из четырех цифр. Для совместимости также принимаются 2 цифры и
                    рассматриваются как <code>19xx</code>, к примеру, <code>98</code> здесь это то же самое, что и
                    <code>1998</code>, но настоятельно рекомендуется всегда использовать 4 цифры.</li>
                    <li><code>month</code> начинается с <code>0</code> (январь) по <code>11</code> (декабрь).</li>
                    <li>Параметр <code>date</code> здесь представляет собой день месяца. Если параметр не задан, то
                    принимается значение <code>1</code>.</li>
                    <li>Если параметры <code>hours/minutes/seconds/ms</code> отсутствуют, их значением становится <code>0</code>.</li>
                </ul>
            </li>
        </ul>
    </article>

    <article>
        <h2>Получение компонентов даты</h2>
        <p>Существуют методы получения года, месяца и т.д. из объекта <code>Date</code>:</p>
        <ul>
            <li>
                <p><code>getFullYear()</code></p>
                <p>Получить год (4 цифры)</p>
            </li>
            <li>
                <p><code>getMonth()</code></p>
                <p>Получить месяц, от 0 до 11.</p>
            </li>
            <li>
                <p><code>getDate()</code></p>
                <p>Получить день месяца, от 1 до 31, что несколько противоречит названию метода.</p>
            </li>
            <li>
                <p><code>getHours()</code>, <code>getMinutes()</code>, <code>getSeconds()</code>, <code>getMilliseconds()</code></p>
                <p>Получить, собственно, часы, минуты, секунды или миллисекунды.</p>
            </li>
            <li>
                <p><code>getDay()</code></p>
                <p>Вернуть день недели от <code>0</code> (воскресенье) до <code>6</code> (суббота). Несмотря на то, что
                в ряде стран за первый день недели принят понедельник, в JavaScript начало недели приходится на воскресенье.</p>
            </li>
        </ul>

        <article class="warning">
            <h2>Никакого <code>getYear()</code>. Только <code>getFullYear()</code></h2>
            <p>Многие интерпретаторы JavaScript реализуют нестандартный и устаревший метод <code>getYear()</code>,
            который порой возвращает год в виде двух цифр. Пожалуйста, обходите его стороной. Если нужно значение года,
            используйте <code>getFullYear()</code>.</p>
        </article>
        <p><b>Все вышеперечисленные методы возвращают значения в соответствии с местным часовым поясом.</b></p>
        <p>Однако существуют их UTC-варианты, возвращающие день, месяц, год для временной зоны UTC+0:
        <code>getUTCFullYear()</code>, <code>getUTCMonth()</code>, <code>getUTCDay()</code>. Для их использования
        требуется после <code>'get'</code> подставить <code>'UTC'</code>.</p>
        <p>Помимо вышеприведенных методов, существуют два особых метода без UTC-варианта:</p>
        <ul>
            <li>
                <p><code>getTime()</code></p>
                <p>Для заданной даты возвращает таймстамп - количество миллисекунд, прошедших с 1 января 1970 года UTC+0.</p>
            </li>
            <li>
                <p><code>getTimezoneOffset()</code></p>
                <p>Возвращает разницу в минутах между UTC и местным часовым поясом.</p>
            </li>
        </ul>
    </article>

    <article>
        <h2>Установка компонентов даты</h2>
        <p>Следующие методы позволяют установить компоненты даты и времени:</p>
        <ul>
            <li><code>setFullYear(year, [month], [date])</code></li>
            <li><code>setMonth(month, [date])</code></li>
            <li><code>setDate(date)</code></li>
            <li><code>setHours(hour, [min], [sec], [ms])</code></li>
            <li><code>setMinutes(min, [sec], [ms])</code></li>
            <li><code>setSeconds(sec, [ms])</code></li>
            <li><code>setMilliseconds(ms)</code></li>
            <li><code>setTime(milliseconds)</code> (устанавливает дату в виде целого количества миллисекунд с 01.01.1970 UTC)</li>
        </ul>
        <p>У всех этих методов, кроме <code>setTime()</code>, есть UTC-варианты, например <code>setUTCHours()</code>.</p>
        <p>Как мы видим, некоторые методы могут устанавливать сразу несколько компонентов даты, например: <code>setHours</code>.
        Если какая-то компонента не указана, она не меняется.</p>
    </article>

    <article>
        <h2>Автоисправление даты</h2>
        <p><i>Автоисправление</i> - это очень полезная особенность объектов <code>Date</code>. Можно устанавливать компоненты
        даты вне обычного диапазона значений, а объект сам себя исправит.</p>
        <p>Пример:</p>
        <code>
            let date = new Date(2013, 0, 32); // 32 Jan 2013 ???<br>
            alert(date); // 1st Feb 2013
        </code>
        <p>Неправильные компоненты даты автоматически распределяются по остальным.</p>
        <p>Предположим, нам требуется увеличить даты «28 февраля 2016» на два дня. В зависимости от того, високосный это год
        или нет, результатом будет «2 марта» или «1 марта». Нам об этом думать не нужно. Просто прибавляем два дня.
        Объект <code>Date</code> позаботится об остальном:</p>
        <code>
            let date = new Date(2016, 1, 28);<br>
            date.setDate(date.getDate() + 2);
        </code>
        <p>Также можно установить нулевые или даже отрицательные значения. Например:</p>
        <code>
            let date = new Date(2016, 0, 2); // 2 Jan 2016<br>
            <br>
            date.setDate(0); // Первый день месяца - это 1, так что выводится последнее число предыдущего месяца 31 Dec 2015
        </code>
    </article>

    <article>
        <h2>Преобразование к числу, разность дат</h2>
        <p>Если объект <code>Date</code> преобразовать в число, то получим таймстамп по аналогии с <code>date.getTime()</code>.</p>
        <p>Важный побочный эффект: даты можно вычитать, в результате получаем разность в миллисекундах.</p>
    </article>

    <article>
        <h2>Date.now()</h2>
        <p>Если нужно просто измерить время, объект <code>Date</code> нам не нужен.</p>
        <p>Существует особый метод <code>Date.now()</code>, возвращающий текущую метку времени.</p>
        <p>Семантически от эквивалентен <code>new Date().getTime()</code>, однако метод не создает промежуточный объект
        <code>Date</code>. Так что этот способ работает быстрее и не нагружает сборщик мусора.</p>
        <p>Данный способ используется из соображений удобства или когда важно быстродействие.</p>
    </article>

    <article>
        <h2>Разбор строки с датой</h2>
        <p>Метод <code>Date.parse(str)</code> считывает дату из строки.</p>
        <p>Формат строки должен быть следующим: <code>YYYY-MM-DDTHH:mm:ss.sssZ</code>, где:</p>
        <ul>
            <li><code>YYYY-MM-DD</code> - это дата: год-месяц-день.</li>
            <li>Символ <code>'T'</code> используется в качестве разделителя.</li>
            <li><code>HH:mm:ss.sss</code> - время: часы, минуты, секунды и миллисекунды.</li>
            <li>Необязательная часть <code>'Z'</code> обозначает часовой пояс в формате <code>+-hh:mm</code>.
            Если указать просто букву <code>Z</code>, то получится UTC+0.</li>
        </ul>
        <p>Возможны и более короткие варианты, например, <code>YYYY-MM-DD</code> или <code>YYYY-MM</code>, или даже
        <code>YYYY</code>.</p>
        <p>Вызов <code>Date.parse(str)</code> обрабатывает строку в заданном формате и возвращает таймстамп.
        Если формат неправильный, возвращает <code>NaN</code>.</p>
    </article>

    <article>
        <h2>Итого</h2>
        <ul>
            <li>Дата и время в JavaScript представлены объектом <code>Date</code>. Нельзя создать «только дату» или
            «только время»: объекты <code>Date</code> всегда содержат и то, и другое.</li>
            <li>Счет месяцев начинается с нуля.</li>
            <li>Дни недели в <code>getDay()</code> тоже начинаются с нуля, что соответствует воскресенью.</li>
            <li>Объект <code>Date</code> самостоятельно корректируется при введении значений, выходящих за рамки
            допустимых. Это полезно для сложения/вычитания дней/месяцев/недель.</li>
            <li>Даты можно вычитать, и разность возвращается в миллисекундах. Так происходит потому что при преобразовании
            в число объект <code>Date</code> становится таймстампом.</li>
            <li>Используйте <code>Date.now()</code> для быстрого получения текущего времени в формате таймстампа.</li>
        </ul>
        <p>Порой нам нужно измерить время с большей точностью. Собственными средствами JavaScript измерять время в микросекундах
        нельзя, но в большинстве сред такая возможность есть. К примеру, в браузерах есть метод <code>performance.now()</code>,
        возвращающий количество микросекунд с начала загрузки страницы с точностью до микросекунды.</p>
        <p>В Node.js для этого предусмотрен модуль <code>microtime</code> и ряд других способов. Технически почти любое
        устройство или среда позволяют добиться большей точности, просто ее нет в объекте <code>Date</code>.</p>
    </article>
</body>
</html>

<script src="script.js"></script>