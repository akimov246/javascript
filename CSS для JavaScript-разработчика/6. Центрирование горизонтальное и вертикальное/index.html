<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Центрирование горизонтальное и вертикальное</title>
    <link href="../../style.css" rel="stylesheet">
    <script defer src="../../highlightElements.js"></script>
    <style>
        .outer:before {
            content: '';
            display: inline-block;
            height: 100%;
            vertical-align: middle;
        }

        .outer {
            text-align: center;
        }
    </style>
</head>
<body>
    <article>
        <h2>Центрирование горизонтальное и вертикальное</h2>
        <p>В CSS есть всего несколько техник центрирования элементов. Если их знать, то большинство задач решаются просто.</p>
    </article>

    <article>
        <h2>Горизонтальное</h2>

        <h3>text-align</h3>
        <p>Для центрирования инлайновых элементов - достаточно поставить родителю <code>text-align: center</code>:</p>
<pre><code class="language-html">&lt;style&gt;
    .outer {
        text-align: center;
        border: 1px solid blue;
    }
&lt;/style&gt;

&lt;div class="outer"&gt;Текст&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="text-align: center; border: 1px solid blue;">Текст</div>
        </div>
        <p>Для центрирования блока это уже не подойдет, свойство просто не подействует. Например:</p>
<pre><code class="language-html">&lt;style&gt;
    .outer {
        text-align: center;
        border: 1px solid blue;
    }

    .inner {
        width: 100px;
        border: 1px solid red;
    }
&lt;/style&gt;

&lt;div class="outer"&gt;
    &lt;div class="inner"&gt;Текст&lt;/div&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="text-align: center; border: 1px solid blue;">
                <div style="width: 100px; border: 1px solid red;">Текст</div>
            </div>
        </div>

        <h3>margin: auto</h3>
        <p>Блок по горизонтали центрируется <code>margin: auto</code>:</p>
<pre><code class="language-html">&lt;style&gt;
    .outer {
        border: 1px solid blue;
    }

    .inner {
        width: 100px;
        border: 1px solid red;
        margin: auto;
    }
&lt;/style&gt;

&lt;div class="outer"&gt;
    &lt;div class="inner"&gt;Текст&lt;/div&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="border: 1px solid blue;">
                <div style="border: 1px solid red; margin: auto; width: 100px;">Текст</div>
            </div>
        </div>
        <p>В отличие от <code>width/height</code>, значение <code>auto</code> для <code>margin</code> само не появляется.
        Обычно <code>margin</code> равно конкретной величине для элемента, например, <code>0</code> для <code>div</code>.
        Нужно поставить его явно.</p>
        <p>Значение <code>margin-left: auto/margin-right: auto</code> заставляет браузер выделять пол <code>margin</code>
        все доступное сбоку пространство. А если и то и другое <code>auto</code>, то слева и справа будет одинаковый
        отступ, таким образом элемент окажется в середине. Детали вычислений описаны в разделе спецификации
        <a target="_blank" href="https://www.w3.org/TR/CSS21/visudet.html#Computing_widths_and_margins">Calculating widths and margins</a>.</p>
    </article>

    <article>
        <h2>Вертикальное</h2>
        <p>Для горизонтального центрирования все просто. Вертикальное же изначально не было предусмотрено в спецификации
        CSS и по сей день вызывает ряд проблем.</p>
        <p>Есть три основных решения.</p>

        <h3>position: absolute + transform: translate</h3>
        <p>Центрируемый элемент позиционируем абсолютно и опускаем до середины по вертикали при помощи <code>top: 50%</code>,
        и сдвигаем по горизонтали до середины при помощи <code>left: 50%</code>:</p>
<pre><code class="language-html">&lt;style&gt;
    .outer {
        position: relative;
        height: 5rem;
        border: 1px solid blue;
    }

    .inner {
        position: absolute;
        top: 50%;
        left: 50%;
        border: 1px solid red;
    }
&lt;/style&gt;

&lt;div class="outer"&gt;
    &lt;div class="inner"&gt;Текст&lt;/div&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="position: relative; height: 5rem; border: 1px solid blue;">
                <div style="position: absolute; top: 50%; left: 50%; border: 1px solid red;">Текст</div>
            </div>
        </div>
        <p>Это, конечно, не совсем центр. По центру находится верхний-левый угол. Нужно еще приподнять элемент
        на половину своей высоты и сдвинуть влево на половину своей ширины.</p>
        <p><b>Приподнимем элемент на пол-высоты и сдвинем влево на пол-ширины при помощи <code>transform: translate</code>:</b></p>
<pre><code class="language-html">&lt;style&gt;
    .outer {
        position: relative;
        height: 5rem;
        border: 1px solid blue;
    }

    .inner {
        position: absolute;
        top: 50%;
        left: 50%;
        border: 1px solid red;
        transform: translate(-50%, -50%);
    }
&lt;/style&gt;

&lt;div class="outer"&gt;
    &lt;div class="inner"&gt;Текст&lt;/div&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="position: relative; height: 5rem; border: 1px solid blue;">
                <div style="position: absolute; top: 50%; left: 50%; border: 1px solid red; transform: translate(-50%, -50%)">Текст</div>
            </div>
        </div>
    </article>

    <article>
        <h2>Одна строка: line-height</h2>
        <p>Вертикально центрировать одну строку в элементе с известной высотой <code>height</code> можно, указав эту
        высоту в свойстве <code>line-height</code>:</p>
<pre><code class="language-html">&lt;style&gt;
    .outer {
        height: 5em;
        line-height: 5em;
        border: 1px solid blue;
    }

    span {
        border: 1px solid red;
    }
&lt;/style&gt;

&lt;div class="outer"&gt;
    &lt;span&gt;Текст&lt;/span&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="border: 1px solid blue; height: 5em; line-height: 5em;">
                <span style="border: 1px solid red;">Текст</span>
            </div>
        </div>
        <p>Это работает, но лишь до тех пор, пока строка одна, а если содержимое вдруг переносится на другую
        строку, то начинает выглядеть довольно уродливо.</p>
    </article>

    <article>
        <h2>Таблица с vertical-align</h2>
        <p>У свойства <a target="_blank" href="https://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align">vertical-align</a>,
        которое управляет вертикальным расположением элемента, есть два режима работы.</p>
        <p><b>В таблицах свойство <code>vertical-align</code> указывает расположение <i>содержимого</i> ячейки.</b></p>
        <p>Его возможные значения:</p>
        <ul>
            <li>
                <p><code>baseline</code> - значение по умолчанию.</p>
            </li>
            <li>
                <p><code>middle</code>, <code>top</code>, <code>bottom</code> - располагать содержимое посередине,
                вверху, внизу ячейки.</p>
            </li>
        </ul>
        <p>Например, ниже есть таблица со всеми 4-мя значениями:</p>
<pre><code class="language-html">&lt;style&gt;
    table {
        border-collapse: collapse;
    }

    td {
        border: 1px solid blue;
        height: 100px;
    }
&lt;/style&gt;

&lt;table&gt;
    &lt;tbody&gt;
    &lt;tr&gt;
        &lt;td style="vertical-align: baseline"&gt;baseline&lt;/td&gt;
        &lt;td style="vertical-align: top"&gt;top&lt;/td&gt;
        &lt;td style="vertical-align: middle"&gt;middle&lt;/td&gt;
        &lt;td style="vertical-align: bottom"&gt;bottom&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
        <div class="example">
            <table>
                <tbody>
                <tr>
                    <td style="vertical-align: baseline; height: 100px; border: 1px solid blue;">baseline</td>
                    <td style="vertical-align: top; height: 100px; border: 1px solid blue;">top</td>
                    <td style="vertical-align: middle; height: 100px; border: 1px solid blue;">middle</td>
                    <td style="vertical-align: bottom; height: 100px; border: 1px solid blue;">bottom</td>
                </tr>
                </tbody>
            </table>
        </div>
        <p>Обратите внимание, что в ячейке с <code>vertical-align: middle</code> содержимое находится по центру.
        Таким образом, можно обернуть нужный элемент в таблицу размера <code>width: 100%; height: 100%</code>
        с одной ячейкой, у которой указать <code>vertical-align: middle</code>, и он будет отцентрирован.</p>
        <p>Но мы рассмотрим более красивый способ, который поддерживается во всех современных браузерах.
        В них не обязательно делать таблицу, так как доступно значение <code>display: table-cell</code>.
        Для элемента с таким <code>display</code> используются те же алгоритмы вычисления ширины и центрирования,
        что и в <code>td</code>. И, в том числе, работает <code>vertical-align</code>.</p>
        <p>Пример центрирования:</p>
<pre><code class="language-html">&lt;div style="display: table-cell; vertical-align: middle; height: 100px; border: 1px solid red;"&gt;
    &lt;button&gt;Кнопка&lt;br&gt;с любой высотой&lt;br&gt;и шириной&lt;/button&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="display: table-cell; vertical-align: middle; height: 100px; border: 1px solid red;">
                <button>Кнопка<br>с любой высотой<br>и шириной</button>
            </div>
        </div>
        <p><b>Этот способ замечателен тем, что он не требует знания высоты элементов.</b></p>
        <p>Однако, у него есть особенность. Вместе с <code>vertical-align</code> родительский блок получает табличный
        алгоритм вычисления ширины и начинает подстраиваться под содержимое. Это не всегда желательно.</p>
        <p>Чтобы его растянуть, нужно указать <code>width</code> явно, например, <code>300px</code>:</p>
<pre><code class="language-html">&lt;div style="width: 300px; display: table-cell; vertical-align: middle; height: 100px; border: 1px solid red;"&gt;
    &lt;button&gt;Кнопка&lt;br&gt;с любой высотой&lt;br&gt;и шириной&lt;/button&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="width: 300px; display: table-cell; vertical-align: middle; height: 100px; border: 1px solid red;">
                <button>Кнопка<br>с любой высотой<br>и шириной</button>
            </div>
        </div>
        <p>Можно и в процентах, но в примере выше они не сработают, потому что структура таблицы «сломана» - ячейка
        есть, а собственно таблицы-то нет.</p>
        <p>Это можно починить, завернув «псевдоячейку» в элемент с <code>display: table</code>, которому и поставим
        ширину:</p>
<pre><code class="language-html">&lt;div style="display: table; width: 100%"&gt;
    &lt;div style="display: table-cell; vertical-align: middle; height: 100px; border: 1px solid blue;"&gt;
        &lt;button&gt;Кнопка&lt;br&gt;с любой высотой&lt;br&gt;и шириной&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="display: table; width: 100%">
                <div style="display: table-cell; vertical-align: middle; height: 100px; border: 1px solid blue;">
                    <button>Кнопка<br>с любой высотой<br>и шириной</button>
                </div>
            </div>
        </div>
        <p>Если дополнительно нужно горизонтальное центрирование - оно обеспечивается другими средствами, например,
        <code>margin: 0 auto</code> для блочных элементов или <code>text-align: center</code> на родителе - для других.</p>
    </article>

    <article>
        <h2>Центрирование в строке с vertical-align</h2>
        <p>Для инлайновых элементов (<code>display: inline/inline-block</code>), включая картинки, свойство
        <code>vertical-align</code> центрирует <i>сам инлайн-элемент в окружающем его тексте</i>.</p>
        <div class="example">
            <p>Картинка размером в <code>30px</code>, значения <code>vertical-align</code>:</p>
            <p><code>baseline</code>(по умолчанию) <img src="images/30.png" alt style="vertical-align: baseline; width: 30px"></p>
            <p><code>middle</code>(посередине) <img src="images/30.png" alt style="vertical-align: middle; width: 30px"></p>
            <p><code>sub</code><sub>вровень с &lt;sub&gt;</sub> <img src="images/30.png" alt style="vertical-align: sub; width: 30px"></p>
            <p><code>super</code><sup>вровень с &lt;sup&gt;</sup> <img src="images/30.png" alt style="vertical-align: super; width: 30px"></p>
            <p><code>text-top</code>(верхняя граница вровень с текстом) <img src="images/30.png" alt style="vertical-align: text-top; width: 30px"></p>
            <p><code>text-bottom</code>(нижняя граница вровень с текстом) <img src="images/30.png" alt style="vertical-align: text-bottom; width: 30px"></p>
        </div>
        <p>Это можно использовать и для центрирования, если высота родителя известна, а центрируемого элемента - нет.</p>
        <p>Допустим, высота внешнего элемента <code>120px</code>. Укажем ее в свойстве <code>line-height</code>:</p>
<pre><code class="language-html">&lt;style&gt;
    .outer {
        line-height: 120px;
        height: 120px;
        border: 1px solid blue;
    }

    .inner {
        display: inline-block; /* Центрировать... */
        vertical-align: middle; /* ... по вертикали */
        line-height: 1.25; /* Переопределить высоту строки на обычную */
        border: 1px solid red;
    }
&lt;/style&gt;

&lt;div class="outer"&gt;
    &lt;span class="inner"&gt;Центрирован&lt;br&gt;вертикально&lt;/span&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="height: 120px; line-height: 120px; border: 1px solid blue;">
                <span style="display: inline-block; vertical-align: middle; line-height: 1.25; border: 1px solid red;">Центрирован<br>вертикально</span>
            </div>
        </div>
        <p>Свойство <code>line-height</code> наследуется, поэтому надо знать «правильную» высоту строки и переопределять
        ее для <code>inner</code>.</p>
    </article>

    <article>
        <h2>Центрирование с vertical-align без таблиц</h2>
        <p>Если центрирование должно работать для любой высоты родителя и центрируемого элемента, то обычно используют
        таблицы или <code>display: table-cell</code> с <code>vertical-align</code>.</p>
        <p>Если центрируются не-блочные элементы, например, <code>inline</code> или <code>inline-block</code>,
        то <code>vertical-align</code> может решить задачу без всяких таблиц. Правда, понадобится вспомогательный
        элемент (можно через <code>:before</code>).</p>
        <p>Пример:</p>
<pre><code class="language-html">&lt;style&gt;
    .before {
        display: inline-block;
        height: 100%;
        vertical-align: middle;
    }

    .inner {
        display: inline-block;
        vertical-align: middle
    }
&lt;/style&gt;

&lt;div class="outer" style="height: 100px; border: 1px solid blue;"&gt;
    &lt;span class="before"&gt;&lt;/span&gt;
    &lt;span class="inner" style="border: 1px solid red;"&gt;Центрированный&lt;br&gt;Элемент&lt;/span&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="height: 100px; border: 1px solid blue;">
                <span style="display: inline-block; height: 100%; vertical-align: middle"></span>
                <span style="vertical-align: middle; display: inline-block; border: 1px solid red;">Центрированный<br>Элемент</span>
            </div>
        </div>
        <ul>
            <li>
                <p>Перед центрируемым элементом помещается вспомогательный инлайн-блок <code>before</code>, занимающий
                всю возможную высоту.</p>
            </li>
            <li>
                <p>Центрируемый блок выровнен по его середине.</p>
            </li>
        </ul>
        <p>Для современных браузеров можно добавить вспомогательный элемент через <code>:before</code>:</p>
<pre><code class="language-html">&lt;style&gt;
    .outer:before {
        content: '';
        display: inline-block;
        height: 100%;
        vertical-align: middle;
    }

    .inner {
        display: inline-block;
        vertical-align: middle;
    }

    /* Добавим горизонтальное центрирование */
    .outer {
        text-align: center;
    }
&lt;/style&gt;

&lt;div class="outer" style="height: 100px; border: 1px solid black;"&gt;
    &lt;span class="inner" style="border: 1px solid red;"&gt;Центрированный&lt;br&gt;Элемент&lt;/span&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div class="outer" style="height: 100px; width: 100%; border: 1px solid black;">
                <span style="border: 1px solid red; display: inline-block; vertical-align: middle">Центрированный<br>Элемент</span>
            </div>
        </div>
        <p>В примере выше добавлено также горизонтальное центрирование <code>text-align: center</code>. Но вы
        можете видеть, что на самом деле внутренний элемент не центрирован горизонтально, он немного сдвинут вправо.</p>
        <p>Это происходит потому, что центрируется <i>весь текст</i>, а перед <code>inner</code> находится пробел,
        который занимает место.</p>
        <p>Варианта два:</p>
        <ol>
            <li>
                <p>Убрать лишний пробел между <code>div</code> и началом <code>inner</code>, будет
                <code>&lt;div class="outer"&gt;&lt;span class="inner"&gt;...</code>.</p>
            </li>
            <li>
                <p>Оставить пробел, но сделать отрицательный <code>margin-left</code> у <code>inner</code>, равный размеру
                пробела, чтобы <code>inner</code> сместился левее.</p>
            </li>
        </ol>
        <p>Второе решение:</p>
<pre><code class="language-html">&lt;style&gt;
    .outer:before {
        content: '';
        display: inline-block;
        height: 100%;
        vertical-align: middle;
    }

    .inner {
        display: inline-block;
        vertical-align: middle;
        margin-left: -0.35em;
    }

    .outer {
        text-align: center;
    }
&lt;/style&gt;

&lt;div class="outer" style="height: 100px; border: 1px solid black;"&gt;
    &lt;span class="inner" style="border: 1px solid red;"&gt;Центрированный&lt;br&gt;Элемент&lt;/span&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div class="outer" style="height: 100px; width: 100%; border: 1px solid black;">
                <span style="margin-left: -0.35em; border: 1px solid red; display: inline-block; vertical-align: middle">Центрированный<br>Элемент</span>
            </div>
        </div>
    </article>

    <article>
        <h2>Центрирование с использованием модели flexbox</h2>
        <p>Данный метод поддерживается всеми современными браузерами.</p>
<pre><code class="language-html">&lt;style&gt;
    .outer {
        display: flex;
        justify-content: center; /* Центрирование по горизонтали */
        align-items: center; /* Центрирование по вертикали */
    }
&lt;/style&gt;

&lt;div class="outer" style="height: 100px; width: 100%; border: 1px solid black;"&gt;
    &lt;span style="border: 1px solid red;"&gt;Центрированный&lt;br&gt;Элемент&lt;/span&gt;
&lt;/div&gt;</code></pre>
        <div class="example">
            <div style="display: flex; justify-content: center; align-items: center; border: 1px solid black; height: 100px;">
                <span style="border: 1px solid red;">Центрированный<br>Элемент</span>
            </div>
        </div>
        <p>Плюсы:</p>
        <ul>
            <li>
                <p>Не требует знания высоты центрируемого элемента.</p>
            </li>
            <li>
                <p>CSS чистый, короткий и не требует дополнительных элементов.</p>
            </li>
        </ul>
    </article>

    <article>
        <h2>Итого</h2>
        <p>Обобщим решения, которые обсуждались в этой статье.</p>
        <p>Для горизонтального центрирования:</p>
        <ul>
            <li>
                <p><code>text-align: center</code> - центрирует инлайн-элемент в блоке.</p>
            </li>
            <li>
                <p><code>margin: 0 auto;</code> - центрирует блок внутри родителя. У блока должна быть указана ширина.</p>
            </li>
        </ul>
        <p>Для вертикального центрирования одного блока внутри другого:</p>
        <p><b>Если размер центрируемого элемента известен, а родителя - нет:</b></p>
        <ul>
            <li>
                <p>Родителю <code>position: relative</code>, потомку <code>position: absolute; top: 50%</code>
                и <code>translateY(-50%)</code>. Аналогично можно отцентрировать и по горизонтали.</p>
            </li>
        </ul>
        <p><b>Если нужно отцентрировать одну строку в блоке, высота которого известна:</b></p>
        <ul>
            <li>
                <p>Поставить блоку <code>line-height: &lt;высота&gt;</code>. Нужны конкретные единицы высоты
                (<code>px</code>, <code>em</code>,...). Значение <code>line-height: 100%</code> не будет работать,
                так как проценты берутся не от высоты блока, а от текущей <code>line-height</code>.</p>
            </li>
        </ul>
        <p><b>Высота родителя известна, а центрируемого элемента - нет:</b></p>
        <ul>
            <li>
                <p>Поставить <code>line-height</code> родителю во всю его высоту, а потомку поставить
                <code>display: inline-block</code>.</p>
            </li>
        </ul>
        <p><b>Высота обоих элементов неизвестна</b>, три варианта:</p>
        <ol>
            <li>
                <p>Сделать элемент-родитель ячейкой таблицы при помощи <code>display: table-cell</code> или реальной
                таблицы, и поставить ему <code>vertical-align: middle</code>. Отлично работает, но мы имеем дело
                с таблицей вместо обычного блока.</p>
            </li>
            <li>
                <p>Решение со вспомогательным элементом <code>outer:before</code> и инлайн-блоками. Вполне универсально
                и не создает таблицу.</p>
            </li>
            <li>
                <p>Решение с использованием <code>flexbox</code>.</p>
            </li>
        </ol>
    </article>
</body>
</html>